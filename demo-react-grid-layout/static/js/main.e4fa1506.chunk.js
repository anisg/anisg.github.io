(this["webpackJsonpdemo-react-grid-layout"]=this["webpackJsonpdemo-react-grid-layout"]||[]).push([[0],{101:function(n,t,e){n.exports=e(126)},106:function(n,t,e){},126:function(n,t,e){"use strict";e.r(t);var o={};e.r(o),e.d(o,"getBlocks",(function(){return p})),e.d(o,"addBlock",(function(){return O})),e.d(o,"removeBlock",(function(){return h})),e.d(o,"addTodoItem",(function(){return x})),e.d(o,"updateTodoItem",(function(){return T})),e.d(o,"removeTodoItem",(function(){return B}));var a,r=e(1),c=e.n(r),i=e(50),u=e.n(i),l=(e(106),e(107),e(108),e(55)),d=e(54),s=e(87),m=e(51),b=e(78),f=e(4),v=e(56);!function(n){n.active="active",n.completed="completed"}(a||(a={}));var g="fragment block on Block {\n  id\n  todos {\n    id\n    content\n    status\n    isLoading\n  }\n}";function k(){var n=Object(f.a)(["\n    query getBlocks {\n  blocks @client {\n    id\n    todos {\n      id\n      status\n      content\n      isLoading\n    }\n  }\n}\n    ","\n","\n"]);return k=function(){return n},n}var p=Object(v.a)(k(),"fragment todo on TodoItem {\n  id\n  content\n  status\n  isLoading\n}",g);function j(){var n=Object(f.a)(["\n    mutation addBlock($id: ID!) {\n  addBlock(id: $id) @client {\n    id\n  }\n}\n    \n"]);return j=function(){return n},n}var O=Object(v.a)(j());function I(){var n=Object(f.a)(["\n    mutation removeBlock($id: ID!) {\n  removeBlock(id: $id) @client {\n    id\n  }\n}\n    \n"]);return I=function(){return n},n}var h=Object(v.a)(I());function y(){var n=Object(f.a)(["\n    mutation addTodoItem($blockId: ID!, $content: String!) {\n  addTodoItem(blockId: $blockId, content: $content) @client {\n    id\n  }\n}\n    ","\n"]);return y=function(){return n},n}var x=Object(v.a)(y(),g);function E(){var n=Object(f.a)(["\n    mutation updateTodoItem($id: ID!, $content: String, $status: TodoItemStatus) {\n  updateTodoItem(id: $id, content: $content, status: $status) @client\n}\n    \n"]);return E=function(){return n},n}var T=Object(v.a)(E());function $(){var n=Object(f.a)(["\n    mutation removeTodoItem($blockId: ID!, $id: ID!) {\n  removeTodoItem(blockId: $blockId, id: $id) @client {\n    id\n  }\n}\n    ","\n"]);return $=function(){return n},n}var B=Object(v.a)($(),g),w=e(80),C=(e(81),e(88));e(89);function D(n,t){return Object(C.a)(n,t)}var S=o,L=e(73);function R(){var n=Object(f.a)(["\n  fragment block on Block {\n    id\n    todos {\n      id\n      content\n      status\n      isLoading\n    }\n  }\n"]);return R=function(){return n},n}function F(){var n=Object(f.a)(["\n  fragment todo on TodoItem {\n    id\n    content\n    status\n    isLoading\n  }\n"]);return F=function(){return n},n}var q=Object(v.a)(F()),_=Object(v.a)(R()),z=0,J={Mutation:{addTodoItem:function(n,t,e){var o=t.blockId,r=t.content,c=e.cache,i=(e.getCacheKey,c.readFragment({fragment:_,id:"Block:".concat(o)}));console.log("block",i);var u={__typename:"TodoItem",id:z++,content:r,status:a.active,isLoading:!1},l=Object(L.a)(i,(function(n){n.todos=[u].concat(Object(b.a)(n.todos))}));return c.writeData({data:{block:l}}),u},updateTodoItem:function(n,t,e){var o=t.id,a=t.content,r=void 0===a?null:a,c=t.status,i=void 0===c?null:c,u=e.cache,l=u.readFragment({fragment:q,id:"TodoItem:".concat(o)}),d=Object(L.a)(l,(function(n){r&&(n.content=r),i&&(n.status=i)}));return u.writeData({data:d,id:"TodoItem:".concat(o)}),!0},removeTodoItem:function(n,t,e){var o=t.blockId,a=t.id,r=e.cache,c=r.readFragment({fragment:_,id:"Block:".concat(o)}),i=null,u=Object(m.a)({},c,{todos:c.todos.filter((function(n){return n.id!=a||(i=n,!1)}))});return r.writeData({data:{block:u}}),i},removeBlock:function(n,t,e){var o=t.id,a=e.cache,r=a.readQuery({query:S.getBlocks}),c=null,i=Object(m.a)({},r,{blocks:r.blocks.filter((function(n){return n.id!=o||(c=n,!1)}))});return a.writeData({data:i}),c},addBlock:function(n,t,e){var o=t.id,a=e.cache,r=a.readQuery({query:S.getBlocks}),c={__typename:"Block",id:o,todos:[]},i={blocks:[c].concat(Object(b.a)(r.blocks))};return a.writeData({data:i}),c}},TodoItem:{},Block:{}},K=e(92),Q=e.n(K),V=e(57),A=e(45),G=e(23),H=e(46),M=e(15);function N(){var n=Object(f.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n"]);return N=function(){return n},n}function W(){var n=Object(f.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  padding: 5px 20px;\n  border-bottom: 1px solid grey;\n"]);return W=function(){return n},n}function P(){var n=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return P=function(){return n},n}function U(){var n=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return U=function(){return n},n}var X=M.a.div(U()),Y=M.a.div(P()),Z=(M.a.div(W()),M.a.div(N()),e(63)),nn=e(53);function tn(){var n=Object(f.a)(["\n  position: absolute;\n  right: 5px;\n  top: 30%;\n  color: grey;\n  ","\n"]);return tn=function(){return n},n}function en(){var n=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  font-size: 17px;\n"]);return en=function(){return n},n}function on(){var n=Object(f.a)(["\n  flex: 1;\n  padding: 5px 5px;\n  border: 1px solid grey;\n  border-radius: 3px;\n"]);return on=function(){return n},n}var an=M.a.input(on()),rn=M.a.form(en()),cn=Object(M.a)(Z.a).attrs((function(){return{icon:nn.a}}))(tn(),(function(n){if(!n.disabled)return"\n\t\t\tcolor: black;\n\t\t\t&:hover {\n\t\t\t\tcolor: blue;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t"})),un=function(n){var t=n.onSubmit,e=n.placeholder,o=void 0===e?"enter message...":e,a=n.defaultValue,i=void 0===a?"":a,u=Object(A.a)(n,["onSubmit","placeholder","defaultValue"]),l=Object(r.useRef)(null),d=Object(r.useState)(i),s=Object(G.a)(d,2),m=s[0],b=s[1];return c.a.createElement(rn,Object.assign({onSubmit:function(n){n.preventDefault(),m.length>1&&(t(m),b(""))}},u),c.a.createElement(an,{ref:l,value:m,onChange:function(n){return b(n.target.value)},placeholder:o}),c.a.createElement(cn,{onClick:function(){m.length&&(t(m),b(""))},disabled:0==m.length}))};function ln(){var n=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return ln=function(){return n},n}function dn(){var n=Object(f.a)(["\n  position: absolute;\n  right: 5px;\n  top: 30%;\n  ","\n"]);return dn=function(){return n},n}function sn(){var n=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  border: 1px solid grey;\n"]);return sn=function(){return n},n}function mn(){var n=Object(f.a)(["\n  flex: 1;\n  padding: 5px 5px;\n  border-radius: 3px;\n  font-size: 17px;\n  border: 0;\n  ","\n"]);return mn=function(){return n},n}var bn=M.a.input(mn(),(function(n){return n.completed&&"font-style: italic; text-decoration: line-through;"})),fn=M.a.div(sn()),vn=Object(M.a)(Z.a)(dn(),(function(n){var t=n.color;return"\n\tcolor: ".concat(t.primary,";\n\t&:hover {\n\t\tcolor: ").concat(t.hover,";\n\t\tcursor: pointer;\n\t}\n\t")})),gn=M.a.div(ln()),kn=function(n){var t=n.checked,e=n.onToggle;return c.a.createElement(gn,null,c.a.createElement("input",{type:"checkbox",checked:t,onChange:e}),c.a.createElement("span",null))},pn=function(n){return c.a.createElement(vn,Object.assign({icon:nn.b,color:{primary:"black",hover:"grey"}},n))},jn=function(n){return c.a.createElement(vn,Object.assign({icon:nn.c,color:{primary:"black",hover:"grey"}},n))},On=function(n){var t=n.value,e=n.completed,o=n.isSync,a=void 0!==o&&o,i=n.onChangeText,u=n.onToggle,l=n.onRemove,d=(Object(A.a)(n,["value","completed","isSync","onChangeText","onToggle","onRemove"]),Object(r.useState)(t)),s=Object(G.a)(d,2),m=s[0],b=s[1],f=Object(r.useRef)(null);return c.a.createElement(fn,null,c.a.createElement(kn,{checked:e,onToggle:u}),c.a.createElement(bn,{value:m,ref:f,onChange:function(n){return b(n.target.value)},onBlur:function(){return m!=t&&i(m)},onKeyDown:function(n){"Escape"==n.key?n.target.blur():"Enter"==n.key&&n.target.blur()},completed:e}),a?c.a.createElement(pn,null):c.a.createElement(jn,{onClick:l}))},In=function(){return c.a.createElement("div",null,"Loading... ")},hn=function(){return c.a.createElement("div",null,"no items... ")},yn=function(n){var t=n.onChangeItemContent,e=n.onChangeItemStatus,o=n.onRemoveItem,a=n.isLoading,r=n.todos;return a?c.a.createElement(In,null):0==r.length?c.a.createElement(hn,null):c.a.createElement(Y,null,r.map((function(n){var a=n.content,r=n.status,i=n.isLoading,u=n.id;return c.a.createElement(On,{key:u,value:a,completed:"completed"==r,isSync:i,onChangeText:function(n){return t(u,n)},onToggle:function(){return e(u,"active"==r?"completed":"active")},onRemove:function(){return o(u)}})})))},xn=e(96),En=e.n(xn);function Tn(){var n=Object(f.a)(["\n  border: 1px solid black;\n  padding: 3px;\n  background-color: white;\n  opacity: 0.8;\n"]);return Tn=function(){return n},n}function $n(){var n=Object(f.a)(["\n  width: 100%;\n  border: 1px solid black;\n  align-items: center;\n  background-color: grey;\n  color: white;\n"]);return $n=function(){return n},n}function Bn(){var n=Object(f.a)(["\n  flex: 1;\n  width: 100%;\n"]);return Bn=function(){return n},n}function wn(){var n=Object(f.a)(["\n  font-size: 30px;\n  font-weight: bold;\n"]);return wn=function(){return n},n}function Cn(){var n=Object(f.a)(["\n  flex: column;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  background-color: grey;\n  height: 100%;\n"]);return Cn=function(){return n},n}function Dn(){var n=Object(f.a)(["\n  # Block\n\n  query getBlocks {\n    blocks @client {\n      id\n      todos {\n        id\n        status\n        content\n        isLoading\n      }\n    }\n  }\n\n  mutation addBlock($id: ID!) {\n    addBlock(id: $id) @client {\n      id\n    }\n  }\n\n  mutation removeBlock($id: ID!) {\n    removeBlock(id: $id) @client {\n      id\n    }\n  }\n\n  # Item\n\n  mutation addTodoItem($blockId: ID!, $content: String!) {\n    addTodoItem(blockId: $blockId, content: $content) @client {\n      id\n    }\n  }\n\n  mutation updateTodoItem($id: ID!, $content: String, $status: TodoItemStatus) {\n    updateTodoItem(id: $id, content: $content, status: $status) @client\n  }\n\n  mutation removeTodoItem($blockId: ID!, $id: ID!) {\n    removeTodoItem(blockId: $blockId, id: $id) @client {\n      id\n    }\n  }\n"]);return Dn=function(){return n},n}Object(v.a)(Dn());var Sn=Object(H.a)(Y)(Cn()),Ln=Object(H.a)(Y)(wn()),Rn=Object(H.a)(Y)(Bn()),Fn=Object(H.a)(Y)($n()),qn=Object(H.a)(Y)(Tn()),_n=function(n){var t=n.e,e=D(S.removeBlock),o=Object(G.a)(e,1)[0],a=D(S.addTodoItem),r=Object(G.a)(a,1)[0],i=D(S.updateTodoItem),u=Object(G.a)(i,1)[0],l=D(S.removeTodoItem),d=Object(G.a)(l,1)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{flex:1}},c.a.createElement(un,{onSubmit:function(n){return r({variables:{blockId:t.id,content:n}})},placeholder:"block ".concat(t.id,"...")}),c.a.createElement(yn,{todos:t.todos,isLoading:!1,onChangeItemContent:function(n,t){return u({variables:{id:n,content:t}})},onChangeItemStatus:function(n,t){return u({variables:{id:n,status:t}})},onRemoveItem:function(n){return d({variables:{blockId:t.id,id:n}})}})),c.a.createElement("button",{onClick:function(){return o({variables:{id:t.id}})}},"remove block ",t.id))},zn=function(n){var t=n.blocks,e=n.onCreateBlock,o=n.layout;Object(A.a)(n,["blocks","onCreateBlock","layout"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(X,null,c.a.createElement(Ln,null,"Grid Layout"),c.a.createElement("button",{onClick:e},"Add block")),c.a.createElement(Fn,null,c.a.createElement(Rn,null,c.a.createElement(En.a,{className:"layout",style:{minHeight:170},isDroppable:!0,width:1200,draggableCancel:"input,textarea,button"},t.map((function(n){return c.a.createElement(qn,{key:n.id,"data-grid":o[n.id]},c.a.createElement(_n,{e:n}))}))))))},Jn=1,Kn=function(){var n,t,e=(n=S.getBlocks,Object(w.a)(n,t)).data.blocks,o=D(S.addBlock),a=Object(G.a)(o,1)[0],i=Object(r.useState)({}),u=Object(G.a)(i,2),l=u[0],d=u[1],s=Object(r.useCallback)((function(){var n,t;return Q.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:n="".concat(Jn++),a({variables:{id:n}}),t={i:n,x:0,y:0,w:3,h:1,minW:3,static:!1},d(Object(m.a)({},l,Object(V.a)({},n,t)));case 4:case"end":return e.stop()}}))}),[e,l]);return c.a.createElement(Sn,null,c.a.createElement(zn,{blocks:e,onCreateBlock:function(){return s()},layout:l}))},Qn=new l.a;Qn.writeData({data:{blocks:[]}});var Vn=new d.a({cache:Qn,resolvers:J});u.a.render(c.a.createElement(s.a,{client:Vn},c.a.createElement((function(){return c.a.createElement(Kn,null)}),null)),document.getElementById("root"))}},[[101,1,2]]]);
//# sourceMappingURL=main.e4fa1506.chunk.js.map